之前的五天我们已经做完了一个简单的分布式缓存功能，现在我们要优化一下，避免**缓存击穿**

## 缓存可能遇到的问题

### 缓存击穿
### 缓存穿透 （查的东西根本不存在）

请求的数据**在缓存和数据库中都不存在**，导致每次请求都会直接打到数据库。

```markdown
请求 → 缓存 miss
     → 数据库 miss
     → 返回空
（下次请求还是一样）

```
主要危害

- 缓存完全失效
    
- 数据库被**持续**压测 （比如说1万条查询，每次都要访问数据库，每次又都是空）
    
- 隐蔽、不易发现
### 缓存雪崩（大量缓存一起失效）

**大量缓存同时失效**，或者缓存服务整体不可用，导致请求全部落到数据库。

```markdown
请求 → 缓存大面积失效
     → DB 被打崩
```



