一个 **CLI 可部署/管理** 的 Agent 服务，支持 **飞书/Telegram 等 Channel 接入**，用户可在 IM 里指挥服务器上的 agent 工作；支持**长期记忆**。

## MVP 范围（必须做）

- CLI：启动/停止/状态查看（本地或远程服务进程）
- Gateway：至少接入 **飞书**
- Agent Runtime：ReAct Loop + 工具执行（至少 1~2 个工具：服务器状态查询）
- Memory：最小可用（本地持久化 + 注入上下文）
- api 格式：Openai

## 非 MVP（后期）

- 多 Channel（Telegram/WeCom/WhatsApp/WebUI）
- Cron、Heartbeat、Skill 市场化、复杂记忆检索
- 兼容多种 api 格式（openai， anthropic）

## 技术选型

**语言**：使用go语言，内存占用小，适合个人服务器
**框架**：eino框架

## 项目模块

### CLI
cobra
### Channel

feishu
### Bus
### Gateway

### Memory

```text
┌─────────────────────────────────────────┐
│           Memory Store                  │
├─────────────────────────────────────────┤
│  1. MEMORY.md (长期记忆)                │
│     - 持久化存储，跨会话                 │
│     - 用户偏好、重要信息                 │
│                                          │
│  2. Daily Logs (每日日记)               │
│     - 按日期命名: 2026-02-13.md         │
│     - 每日交互摘要                       │
│                                          │
│  3. 构建 System Prompt                   │
│     - 自动加载所有记忆                   │
└─────────────────────────────────────────┘
```
### Agent

```text
用户消息 + Memory Context + Skills
           │
           ▼
    ┌─────────────────┐
    │  System Prompt  │  ← AGENTS.md + SOUL.md + Memory
    └────────┬────────┘
             │
             ▼
┌────────────────────────────────────────┐
│        eino agent Runtime             │
│  ┌──────────────────────────────────┐  │
│  │     ReAct Loop (迭代推理)        │  │
│  │  1. Prompt → LLM                 │  │
│  │  2. LLM decide: 回答/工具        │  │
│  │  3. 执行工具                     │  │
│  │  4. 结果返回 LLM                 │  │
│  │  5. 重复直到完成 (最多20次)      │  │
│  └──────────────────────────────────┘  │
└────────┬───────────────────────────────┘
         │
         ▼
      最终回复

```
#### ReAct Loop



### 数据流全景

```text
                    ┌──────────────┐
                    │   Telegram   │
                    │   Feishu    │  ──▶ 外部消息
                    │   WeCom     │
                    └──────┬───────┘
                           │
                           ▼
                    ┌──────────────┐
                    │  InboundMsg  │
                    └──────┬───────┘
                           │
                           ▼
              ┌────────────────────────────┐
              │     Gateway.runAgent()     │
              │  ┌────────────────────┐   │
              │  │ 1. Build Prompt    │   │
              │  │    (User + Memory) │   │
              │  └────────────────────┘   │
              │            │               │
              │            ▼               │
              │  ┌────────────────────┐   │
              │  │ 2. ReAct Loop      │   │
              │  │    (LLM + Tools)   │   │
              │  └────────────────────┘   │
              │            │               │
              │            ▼               │
              │  ┌────────────────────┐   │
              │  │ 3. Response        │   │
              │  └────────────────────┘   │
              └────────────────────────────┘
                           │
                           ▼
                    ┌──────────────┐
                    │  OutboundMsg │
                    └──────┬───────┘
                           │
         ┌─────────────────┼─────────────────┐
         ▼                 ▼                 ▼
    ┌─────────┐        ┌─────────┐      ┌─────────┐
    │Telegram │        │ Feishu  │      │  ...    │  ──▶ 返回用户
    │  Send   │        │  Send   │
    └─────────┘        └─────────┘
```

```text
┌────────────────────────────────────────────────────────────────────┐
│                         你的项目                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│   ╔══════════════╗    ╔═══════════════╗    ╔══════════════════╗  │
│   ║  Telegram    ║    ║     Bus       ║    ║    Gateway       ║  │
│   ║  快递员      ║───▶║    传达室      ║───▶║    前台          ║  │
│   ║              ║    ║               ║    ║                  ║  │
│   ║  飞书小二    ║───▶║  Inbound队列  ║    ║  1. 接收消息     ║  │
│   ║              ║    ║  Outbound队列 ║◀───║  2. 调教AI       ║  │
│   ║  企微客服    ║───▶║               ║    ║  3. 返回结果     ║  │
│   ╚══════════════╝    ╚═══════╤═══════╝    ╚────────┬─────────╝  │
│                                   │                     │          │
│                                   │                     ▼          │
│   ╔══════════════╗    ╔══════════┴═══════╗    ╔═══════════════╗   │
│   ║  Telegram    ║◀───║               ║◀───║    Agent       ║   │
│   ║  发送回复    ║    ║  Dispatch      ║    ║    AI大脑     ║   │
│   ╚══════════════╝    ╚═══════════════╝    ╚═══════════════╝   │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```
## 开发路线






  ---

## 开发计划（3天）

第一天：计划
第二天：
第三天：

## 待解决问题

Memory 是怎么做的
bus 是怎么做的
为什么用 eino 框架，不用 agent-go-sdk
## 其他项目架构

### openclaw

![[Pasted image 20260213125623.png]]

### myclaw

```text
┌─────────────────────────────────────────────────────────┐
│                      CLI (cobra)                        │
│              agent | gateway | onboard | status          │
└──────┬──────────────────┬───────────────────────────────┘
       │                  │
       ▼                  ▼
┌──────────────┐  ┌───────────────────────────────────────┐
│  Agent Mode  │  │              Gateway                  │
│  (single /   │  │                                       │
│   REPL)      │  │  ┌─────────┐  ┌──────┐  ┌─────────┐  │
└──────┬───────┘  │  │ Channel │  │ Cron │  │Heartbeat│  │
       │          │  │ Manager │  │      │  │         │  │
       │          │  └────┬────┘  └──┬───┘  └────┬────┘  │
       │          │       │          │           │        │
       ▼          │       ▼          ▼           ▼        │
┌──────────────┐  │  ┌─────────────────────────────────┐  │
│  agentsdk-go │  │  │          Message Bus             │  │
│   Runtime    │◄─┤  │    Inbound ←── Channels          │  │
│              │  │  │    Outbound ──► Channels          │  │
└──────────────┘  │  └──────────────┬──────────────────┘  │
                  │                 │                      │
                  │                 ▼                      │
                  │  ┌──────────────────────────────────┐  │
                  │  │      agentsdk-go Runtime         │  │
                  │  │   (ReAct loop + tool execution)  │  │
                  │  └──────────────────────────────────┘  │
                  │                                       │
                  │  ┌──────────┐  ┌────────────────────┐  │
                  │  │  Memory  │  │      Config        │  │
                  │  │ (MEMORY  │  │  (JSON + env vars) │  │
                  │  │  + daily)│  │                    │  │
                  │  └──────────┘  └────────────────────┘  │
                  └───────────────────────────────────────┘

Data Flow (Gateway Mode):
  Telegram/Feishu/WeCom/WhatsApp/WebUI ──► Channel ──► Bus.Inbound ──► processLoop
                                                                      │
                                                                      ▼
                                                               Runtime.Run()
                                                                      │
                                                                      ▼
                                       Bus.Outbound ──► Channel ──► Telegram/Feishu/WeCom/WhatsApp/WebUI
```